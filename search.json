[{"title":"免费域名 + 动态 DNS，兼容大部分设备","url":"/z-6a33.html","content":"<p><code>dynv6</code> 是个免费易用的动态 DNS 服务商，<a href=\"https://dynv6.com/users/sign_up\">点我注册</a></p>\n<p>脚本默认使用 ipv6，几乎每个设备都能拥有的公网 ipv6</p>\n<pre><code>#!/usr/bin/env bash\n\nif [[ &quot;$OSTYPE&quot; == &quot;darwin&quot;* ]]; then\n    # macOS\n    ipv6=$(ifconfig | grep inet6 | grep autoconf | grep -v temporary | awk &#39;&#123;print $2&#125;&#39; | cut -d &#39;%&#39; -f1 | grep -E &#39;^240e:|2408:8000:|2409:8000:&#39;)\nelif [[ &quot;$OSTYPE&quot; == &quot;linux-gnu&quot;* ]]; then\n    # Linux\n    ipv6=$(ip addr show | awk &#39;/inet6/&#123;print $2&#125;&#39; | cut -d &#39;/&#39; -f1 | grep -E &#39;240e:|2408:8000:|2409:8000:&#39; | head -1)\nelse\n    ipv6=$(curl -s 6.ipw.cn)\nfi\n\nhostname=你的域名 (注册后创建)\ntoken=你的token\n# token 获取方式\n# 1. 登录后 -&gt; 右上角邮箱 -&gt; Keys -&gt; HTTP Tokens\n# 2. 登录后 -&gt; My Zones -&gt; 任意一个域名 -&gt; Instructions -&gt; Benutzername\n\nsaved_ip=$(cat ~/.ddns/ipv6.txt)\n\nif [[ &quot;$ipv6&quot; == &quot;$saved_ip&quot; ]]; then\n    echo &quot;当前ip为：$&#123;ipv6&#125;&quot;\n    echo &quot;ipv6 地址没有变化&quot;\nelse\n    echo &quot;当前ip为：$&#123;ipv6&#125;&quot;\n    echo &quot;ipv6 改变，开始更新&quot;\n    curl &quot;http://dynv6.com/api/update?hostname=$hostname&amp;ipv6=$ipv6&amp;token=$token&quot;\n    cat /dev/null&gt; ~/.ddns/ipv6.txt\n    echo $ipv6 &gt; ~/.ddns/ipv6.txt\nfi\n</code></pre>\n<p>复制上面的代码，存为 xx.sh<br>记得赋予可执行权限 <code>chmod +x xx.sh</code><br>最后可以设置个定时任务 <code>crontab -e</code></p>\n<pre><code># 每十分钟执行一次脚本\n*/10 * * * * nohup bash ~/.ddns/ddns.sh &gt; ~/.ddns/ddns.log 2&gt;&amp;1 &amp;\n</code></pre>\n<p>保存即生效</p>\n","tags":["网络"]}]